Ниже приведениы методы HTTP API для работы с данными Point.im.

# Аутентификация #

### Вход

POST `/api/login`

#### Параметры

`login` — имя пользователя. Обязательный параметр.

`password` — пароль. Обязательный параметр.

Далее полученный token нужно передавать в заголовках запросов:

`Authorization: <token>`

### Выход

POST `/api/logout`

#### Параметры

`csrf_token` — Обязательный параметр.

# Посты

### Список последних записей в ленте
#### Запрос ####
GET `/api/recent`
#### Ответ ####

```
{
  /* Наличие кнопки "Предыдущие */
  "has_next": true,
  /* Массив постов */
  "posts": [
    /* Объект поста */
    {
      /* Добавлен ли пост в закладки */
      "bookmarked": false,
      /* Уникальный идентификатор в выборке, используется для пагинации (параметр before) */
      "uid": 1291267,
      /* Статус подписки на пост (комментарии) */
      "subscribed": true,
      /* Разрешено ли редактирование */
      "editable": false,
      /* Рекомендован ли пост */
      "recommended": true,
      /* Объект поста внутри объекта поста */
      "post": {
        /* Массив тегов */
        "tags": [
          "lh",
          "q"
        ],
        /* Количество комментариев */
        "comments_count": 1,
        /* Объект юзера, который написал пост */
        "author": {
          /* Логин автора поста */
          "login": "Daemon",
          /* ID автора поста */
          "id": 195,
          /* Аватарка автора */
          "avatar": "daemon.jpg?r=4717",
          /* Имя автора */
          "name": "Daemon"
        },
        /* Текст поста */
        "text": "1) \u0424\u043e\u0442\u043a\u0430\u0435\u0448\u044c \u0444\u0438\u0433\u0443\u0440\u0443 2) \u0414\u0438\u0447\u0430\u0439\u0448\u0435 \u0436\u0440\u0435\u0448\u044c \u043f\u043e\u043b\u0433\u043e\u0434\u0430 3) \u0424\u043e\u0442\u043a\u0430\u0435\u0448\u044c \u0435\u0449\u0435 \u0440\u0430\u0437 4) \u041c\u0435\u043d\u044f\u0435\u0448\u044c \u0434\u043e \u0438 \u043f\u043e\u0441\u043b\u0435 \u043c\u0435\u0441\u0442\u0430\u043c\u0438 5) \u041f\u043e\u0441\u0442\u0438\u0448\u044c 6) \u0421\u043e\u0431\u0438\u0440\u0430\u0435\u0448\u044c \u043b\u0430\u0439\u043a\u0438 7) \u0414\u0430\u0451\u0448\u044c \u0441\u043e\u0432\u0435\u0442\u044b",
        /* Дата написания */
        "created": "2014-03-29T15:29:41.561889",
        /* Тип поста */
        "type": "post",
        /* Символьный идентификатор (используется в URL) */
        "id": "lby",
        /* Приватный ли пост */
        "private": false
      }
    }
  ]
}
```

#### Параметры

`before` — идентификатор записи, от которой нужно начать выборку. Не включает запись.

Необходима аутентификация.

### Список последних записей в блоге пользователя

GET `/api/blog/<login>`

#### Параметры

`before` — идентификатор записи, от которой нужно начать выборку. Не включает запись.

### Список комментируемых постов

GET `/api/comments`

#### Параметры

`before` — идентификатор записи, от которой нужно начать выборку. Не включает запись.

Необходима аутентификация.

### Список входящих сообщений

GET `/api/messages`

GET `/api/messages/incoming`

#### Параметры

`before` — идентификатор записи, от которой нужно начать выборку. Не включает запись.

Необходима аутентификация.

### Список исходящих сообщений

GET `/api/messages/outgoing`

#### Параметры

`before` — идентификатор записи, от которой нужно начать выборку. Не включает запись.

Необходима аутентификация.

### Просмотр поста

GET `/api/post/<post>`

# Теги

### Список тегов пользователя

GET `/api/tags/<login>`

### Выборка постов по тегам

GET `/api/tags`

#### Параметры

`tag` — тег. Обязательный параметр.

Можно указывать несколько тегов.

### Выборка постов по тегам пользователя

GET `/api/tags/<login>`

#### Параметры

`tag` — тег. Обязательный параметр.

Можно указывать несколько тегов.

# Пользователи
### Аватар пользователя ###
```
http(s)://i.point.im/a/<size>/<user>
```
size:

 - 24
 - 40
 - 80


### Информация о пользователе

GET `/api/user/<login>`

### Подписки пользователя

GET `/api/user/<login>/subscriptions`

### Подписчики пользователя

GET `/api/user/<login>/subscribers`

### Белый список пользователей

GET `/api/user/wl`

Необходима аутентификация.

### Белый список пользователей

GET `/api/user/wl`

Необходима аутентификация.

# WebSocket

Для получения уведомлений о событиях можно использовать WebSocket-сервер, расположенный по адресу

`ws://point.im/ws` или `wss://point.im/ws`

Для аутентификации нужно передать WS-серверу сообщение вида:

`Authorization: token`,

где token — ключ, полученный при входе через API.

# Прочее

### Получение аватара

GET `/avatar/<login>/<size>`

где size — размер аватара. Может быть равен 24, 40 или 80.